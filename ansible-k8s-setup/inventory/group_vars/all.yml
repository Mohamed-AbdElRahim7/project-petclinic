---
# ============================================
# Global Variables for Kubernetes Cluster
# ============================================

# Cluster / Environment info
cluster_name: petclinic
env_name: test  # اسم البيئة اللي يبان في اسم الكلاستر (petclinic-test مثلاً)

# Kubernetes Version
k8s_version: "1.28"

# Control Plane Endpoint (Load Balancer DNS)
# GitHub Actions هيعدّل السطر ده بـ NLB DNS:6443 بعد Terraform
control_plane_endpoint: "master-nlb.example.com:6443"

# Network Configuration
pod_network_cidr: "192.168.0.0/16"
service_cidr: "10.96.0.0/12"
dns_domain: "cluster.local"

# API Server Configuration
api_server_port: 6443

# Ingress Configuration
ingress_version: "v1.9.5"

# Timeouts and Retries
kubeadm_init_timeout: 900        # 15 دقيقة للـ init (أكتر من الـ default)
kubeadm_join_timeout: 600        # 10 دقائق للـ join
pod_ready_timeout: 300

# Directories
k8s_config_dir: "/etc/kubernetes"
k8s_manifests_dir: "/etc/kubernetes/manifests"
k8s_pki_dir: "/etc/kubernetes/pki"
etcd_data_dir: "/var/lib/etcd"
containerd_data_dir: "/var/lib/containerd-data"

# CNI Configuration
cni_type: calico
calico_version: "v3.27.0"
calico_manifest_url: "https://raw.githubusercontent.com/projectcalico/calico/{{ calico_version }}/manifests/calico.yaml"

# Project Information
project_name: petclinic

# Kubernetes Namespaces with Resource Quotas
k8s_namespaces:
  - name: dev
    labels:
      environment: development
      team: devops
    resource_quota:
      requests.cpu: "10"
      requests.memory: "20Gi"
      limits.cpu: "20"
      limits.memory: "40Gi"
      pods: "50"
      services: "20"
      persistentvolumeclaims: "10"

  - name: test
    labels:
      environment: testing
      team: qa
    resource_quota:
      requests.cpu: "8"
      requests.memory: "16Gi"
      limits.cpu: "16"
      limits.memory: "32Gi"
      pods: "40"
      services: "15"
      persistentvolumeclaims: "8"

  - name: prod
    labels:
      environment: production
      team: operations
    resource_quota:
      requests.cpu: "20"
      requests.memory: "40Gi"
      limits.cpu: "40"
      limits.memory: "80Gi"
      pods: "100"
      services: "30"
      persistentvolumeclaims: "20"
